---
name: ring:dev-cycle
description: Execute the development cycle for tasks in a markdown file
argument-hint: "[tasks-file] [options]"
---

Execute the development cycle for tasks in a markdown file.

## Usage

```
/dev-cycle [tasks-file] [options]
```

## Arguments

| Argument | Required | Description |
|----------|----------|-------------|
| `tasks-file` | Yes* | Path to markdown file with tasks (e.g., `docs/tasks/sprint-001.md`) |

*Can be omitted if `docs/tasks/current.md` exists.

## Options

| Option | Description | Example |
|--------|-------------|---------|
| `--task ID` | Execute only specific task | `--task PROJ-123` |
| `--skip-gates` | Skip specific gates | `--skip-gates devops,review` |
| `--dry-run` | Validate tasks without executing | `--dry-run` |
| `--resume` | Resume interrupted cycle | `--resume` |
| `--prompt "..."` | Custom context for agents | `--prompt "Focus on error handling"` |

### `--prompt` Flag Behavior

Provides custom context to agents. Max 500 chars; plain-text sanitized (whitespace trimmed, control chars stripped). Cannot override CRITICAL gates: Gate 3 (Testing), Gate 4 (Review), Gate 5 (Validation).

See `dev-cycle` skill's "Custom Prompt Injection" section in SKILL.md for full validation rules, gate protection details, and conflict handling behavior.

**Example:**
```bash
/dev-cycle --prompt "Focus on error handling"
```

**Conflicting prompt:** Warning logged, gate executes normally.

## Examples

```bash
# Execute all tasks from a file
/dev-cycle docs/tasks/sprint-001.md

# Execute single task
/dev-cycle docs/tasks/sprint-001.md --task AUTH-001

# Skip DevOps setup (infrastructure already exists)
/dev-cycle docs/tasks/sprint-001.md --skip-gates devops

# Validate tasks without executing
/dev-cycle docs/tasks/sprint-001.md --dry-run

# Resume interrupted cycle
/dev-cycle --resume

# Execute with custom context for agents
/dev-cycle docs/tasks/sprint-001.md --prompt "Prioritize error handling. Use existing UserRepository interface."
```

## Prerequisites

1. **Task file**: Markdown file generated by `/pre-dev-*` or `/dev-refactor`
2. **Project standards** (optional but recommended): `docs/PROJECT_RULES.md` with project conventions
3. **PRD/TRD** (optional): If exists in `docs/pre-dev/{feature}/`, will be used in design phase

## Gates Executed

| Gate | Skill | Description |
|------|-------|-------------|
| 0 | `dev-implementation` | Implement code (TDD) |
| 1 | `dev-devops` | Create Docker/compose |
| 2 | `dev-sre` | Observability (health checks, logging, tracing) |
| 3 | `dev-testing` | Write and run tests |
| 4 | `requesting-code-review` | Code review (3 reviewers in parallel) |
| 5 | `dev-validation` | Final validation |

**Note:** Tasks are loaded at initialization, not as a separate gate.

After all tasks: `dev-feedback-loop` generates metrics report.

## Output

- **State file**: `docs/dev-cycle/current-cycle.json` (feature) or `docs/dev-refactor/current-cycle.json` (refactor)
- **Feedback report**: `.ring/dev-team/feedback/cycle-YYYY-MM-DD.md`

## Related Commands

| Command | Description |
|---------|-------------|
| `/ring:dev-status` | Check current cycle status |
| `/ring:dev-cancel` | Cancel running cycle |
| `/ring:dev-report` | View feedback report |

---

## ⛔ MANDATORY: Load Full Skill

**This command MUST load the skill for complete workflow execution.**

```
Use Skill tool: ring:dev-cycle
```

The skill contains the complete 6-gate workflow with:
- Anti-rationalization tables
- Pressure resistance scenarios
- TDD sub-phases (Gate 0.1 RED → Gate 0.2 GREEN)
- Gate completion definitions
- Incremental compromise prevention
- State management schema

## Execution Context

Pass the following context to the skill:

| Parameter | Value |
|-----------|-------|
| `tasks-file` | `$1` (first argument, e.g., `docs/tasks/sprint-001.md`) |
| `--task` | If provided, filter to specific task ID |
| `--skip-gates` | If provided, list of gates to skip |
| `--dry-run` | If provided, validate only |
| `--resume` | If provided, resume from existing state file (dev-cycle or dev-refactor) |
| `--prompt` | If provided, custom context passed to all agents |

## Step 1: ASK EXECUTION MODE (MANDATORY)

**After loading skill and before executing gates, you MUST ask:**

```yaml
AskUserQuestion:
  questions:
    - question: "Select execution mode for this cycle"
      header: "Mode"
      options:
        - label: "Manual per subtask"
          description: "Checkpoint after each subtask"
        - label: "Manual per task"
          description: "Checkpoint after each task"
        - label: "Automatic"
          description: "No checkpoints, run all gates"
```

**Do not skip this.** User hints ≠ mode selection. Only explicit selection is valid.

## Quick Reference

See skill `dev-cycle` for full details. Key rules:

- **all 6 gates execute** - Checkpoints affect pauses, not gates
- **Gates execute in order** - 0 → 1 → 2 → 3 → 4 → 5
- **Gate 4 requires all 3 reviewers** - 2/3 = FAIL
- **Coverage threshold** - 85% minimum, no exceptions
- **State persisted** - Can resume with `--resume` after any interruption
