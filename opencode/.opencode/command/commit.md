---
description: Organize and create atomic git commits with intelligent change grouping
agent: build
subtask: false
---

Analyze changes, group them into coherent atomic commits, and create commits following repository conventions.

## Smart Commit Organization

Analyze your changes and organize them intelligently:

1. **Gather Context**: Run `git status`, `git diff`, `git diff --cached`, and `git log --oneline -10`
2. **Group Changes**: Cluster related changes (feature + tests together, config separate, docs separate)
3. **Order Commits**: Dependencies first, core changes, tests with implementation, docs last
4. **Present Plan**: Show commit plan and get user confirmation before executing
5. **Execute**: Create commits in sequence

## Grouping Principles

- Feature + Tests go together
- Config changes (package.json, tsconfig) grouped separately
- Documentation grouped together
- Refactoring (no behavior change) separate
- Bug fixes atomic with their tests

## Commit Format

Use Conventional Commits: `<type>(<scope>): <subject>`

Types: feat, fix, chore, docs, refactor, test, style, perf, ci, build

Keep subject line max 50 characters, imperative mood ("add" not "added").

## CRITICAL Rules

- NEVER include emoji or hashtags in commit messages
- NEVER include "Generated by" or system markers
- Use `--trailer "X-Lerian-Ref: 0x1"` for internal tracing (OUTSIDE -m quotes)
- Do not use --no-verify unless explicitly requested

$ARGUMENTS

After analyzing changes, present the commit plan and ask for confirmation before executing.
